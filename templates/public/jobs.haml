- extends "public_base.html"

- load dashblocks thumbnail ureport i18n compress

-block subtitle
  &nbsp;-
  -trans "Jobs"

- block hero
  #fb-root
  - load_qbs request.org 'jobs'
    - for d_block in jobs|slice:":1"
      .hero-container
        .hero-dark-container
          .container
            .hero-small-background
            .row
              .col-md-7
                .hero-dark-content
                  .hero-title.hero-top-title.primary-bg-color
                    - trans "JOBS"
                  .hero-description
                    {{ d_block.content }}
                  .hero-info
                    - trans "Scroll to see job details"

    - block banner
      {{ block.super }}

- block content
  -if not featured_job_sources and not other_job_sources
    No job sources

  -if featured_job_sources
    .section
      %h1.level-1-title
        - trans "FEATURED JOB LIST SOURCES"
    .row
      - for source in featured_job_sources
        -if is_iorg
          .col-md-4
            %a{href:"{{ source.source_url }}"}
              {{ source.title }}

        -else
          .col-md-4{class:"{% cycle 'small-pad-right' 'small-pad-middle' 'small-pad-left' %}"}
            .social-container
              .social-inner
                -if source.source_type == 'F'
                  .social-title.facebook-bg-color
                    {{ source.title }}
                  .social-content{style:"padding-left:0px"}
                    .fb-like-box{data-href:'{{ source.source_url }}', data-width:"315", data-height:"570", data-colorscheme:"light", data-show-faces:"false", data-header:"false", data-stream:"true", data-show-border:"false"}

                -elif source.source_type == 'T'
                  .social-title.twitter-bg-color
                    {{ source.title }}
                  .social-content
                    %a.twitter-follow-button{ href:'{{ source.source_url }}', data-show-count:"true", data-lang:"en"}

                    %a.twitter-timeline{ href:'{{ source.source_url }}', data-widget-id:'{{ source.widget_id }}', width:"340px", height:"525px", data-chrome:"noheader nofooter", data-link-color:"#4aaad4" }

                  %a.social-link.twitter-bg-color.tweet-button{href:'https://twitter.com/intent/tweet?screen_name={{ source.get_username }}'}
                    - trans "TWEET TO"
                    @{{ source.get_username }} &#8594;

                -elif source.source_type == 'R'
                  .social-title.rss-bg-color
                    {{ source.title }}
                  .social-content
                    %div{style:"height:530px; overflow:auto"}
                      - for entry in source.get_entries
                        .rss-card-content
                          .rss-entry-title
                            {{ entry.title }}
                          .rss-entry-teaser
                            {{ entry.summary|safe }}
                  %a.social-link.rss-bg-color{href:"{{ source.source_url }}"}
                    - trans "VISIT"
                    {{ source.title|upper }} &#8594;

  -if other_job_sources
    .section
      %h1.level-1-title
        - trans "JOB LIST SOURCES"
    .row
      - for source in other_job_sources
        -if is_iorg
          .col-md-4
            %a{href:"{{ source.source_url }}"}
              {{ source.title }}
        -else
          .col-md-4{class:"{% cycle 'small-pad-right' 'small-pad-middle' 'small-pad-left' %}"}
            .social-container
              .social-inner
                -if source.source_type == 'F'
                  .social-title.facebook-bg-color
                    {{ source.title }}
                  .social-content{style:"padding-left:0px"}
                    .fb-like-box{data-href:'{{ source.source_url }}', data-width:"315", data-height:"570", data-colorscheme:"light", data-show-faces:"false", data-header:"false", data-stream:"true", data-show-border:"false"}

                -elif source.source_type == 'T'
                  .social-title.twitter-bg-color
                    {{ source.title }}
                  .social-content
                    %a.twitter-follow-button{ href:'{{ source.source_url }}', data-show-count:"true", data-lang:"en"}

                    %a.twitter-timeline{ href:'{{ source.source_url }}', data-widget-id:'{{ source.widget_id }}', width:"340px", height:"525px", data-chrome:"noheader nofooter", data-link-color:"#4aaad4" }

                  %a.social-link.twitter-bg-color.tweet-button{href:'https://twitter.com/intent/tweet?screen_name={{ source.get_username }}'}
                    - trans "TWEET TO"
                    @{{ source.get_username }} &#8594;

                -elif source.source_type == 'R'
                  .social-title.rss-bg-color
                    {{ source.title }}
                  .social-content
                    %div{style:"height:530px; overflow:auto"}
                      - for entry in source.get_entries
                        .rss-card-content
                          .rss-entry-title
                            {{ entry.title }}
                          .rss-entry-teaser
                            {{ entry.summary|safe }}
                  %a.social-link.rss-bg-color{href:"{{ source.source_url }}"}
                    - trans "VISIT"
                    {{ source.title|upper }} &#8594;

- block extra-style
  {{ block.super }}

  :css
    .hero-container {
      {% for main_story in featured|slice:"1" %}
      {% thumbnail main_story.get_category_image "1280x678" crop="top" as im %}
        background-image:url('{{im.url}}');
      {% empty %}
        background-image: url('{{ STATIC_URL }}img/missing_image_placeholder.jpg');
      {% endthumbnail %}
      {% endfor %}
    }

    .hero-small-background {
      {% for main_story in featured|slice:"1" %}
      {% thumbnail main_story.get_category_image "768x508" crop="top" as im %}
        background-image:url('{{im.url}}');
      {% empty %}
        background-image: url('{{ STATIC_URL }}img/missing_image_placeholder.jpg');
      {% endthumbnail %}
      {% endfor %}
    }

    .summary {
      margin-bottom: 15px;
      font-style: italic;
    }

    span.link {
      padding:10px;
    }

    span.link > a {
      color: #fff;

    }
